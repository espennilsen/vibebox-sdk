# Backend Development Dockerfile - Task T005
FROM node:20-alpine

WORKDIR /app

# Install OpenSSL for Prisma
RUN apk add --no-cache openssl

# Install dependencies
COPY package*.json ./
RUN npm install

# Copy source code
COPY . .

# Generate Prisma Client with correct binary target
RUN npx prisma generate

EXPOSE 3000

# Regenerate Prisma client on container start (in case of volume mount)
CMD sh -c "npx prisma generate && npm run dev"

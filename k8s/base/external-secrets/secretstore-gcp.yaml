---
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: vibebox-gcp-secretstore
  namespace: default
spec:
  provider:
    gcpsm:
      projectID: "your-gcp-project-id"  # Change to your GCP project ID
      auth:
        # Option 1: Use Workload Identity - Recommended for GKE
        workloadIdentity:
          clusterLocation: us-central1  # Change to your cluster location
          clusterName: your-cluster-name
          serviceAccountRef:
            name: vibebox-external-secrets
        # Option 2: Use service account key from Kubernetes secret
        # secretRef:
        #   secretAccessKeySecretRef:
        #     name: gcpsm-secret
        #     key: secret-access-credentials

---
# ClusterSecretStore for use across all namespaces
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: vibebox-gcp-cluster-secretstore
spec:
  provider:
    gcpsm:
      projectID: "your-gcp-project-id"
      auth:
        workloadIdentity:
          clusterLocation: us-central1
          clusterName: your-cluster-name
          serviceAccountRef:
            name: vibebox-external-secrets
            namespace: default

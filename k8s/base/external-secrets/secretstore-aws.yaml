---
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: vibebox-aws-secretstore
  namespace: default
spec:
  provider:
    aws:
      service: SecretsManager
      region: us-east-1  # Change to your AWS region
      auth:
        # Option 1: Use IAM Role for Service Account (IRSA) - Recommended for EKS
        jwt:
          serviceAccountRef:
            name: vibebox-external-secrets
        # Option 2: Use AWS credentials from a Kubernetes secret
        # secretRef:
        #   accessKeyIDSecretRef:
        #     name: aws-credentials
        #     key: access-key-id
        #   secretAccessKeySecretRef:
        #     name: aws-credentials
        #     key: secret-access-key

---
# ClusterSecretStore for use across all namespaces
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: vibebox-aws-cluster-secretstore
spec:
  provider:
    aws:
      service: SecretsManager
      region: us-east-1
      auth:
        jwt:
          serviceAccountRef:
            name: vibebox-external-secrets
            namespace: default

---
# IMPORTANT: This is an EXAMPLE file. DO NOT commit actual secrets to version control.
#
# Usage:
# 1. Copy this file: cp secrets.yaml.example secrets.yaml
# 2. Replace all <PLACEHOLDER> values with actual base64-encoded secrets
# 3. Add secrets.yaml to .gitignore (already done)
# 4. Apply: kubectl apply -f secrets.yaml
#
# Generate base64 secrets:
#   echo -n "your-secret-value" | base64
#
# Generate random secrets:
#   node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#   openssl rand -base64 32
#
# For production, use Kubernetes Secrets management:
# - External Secrets Operator (recommended): https://external-secrets.io/
# - Sealed Secrets: https://github.com/bitnami-labs/sealed-secrets
# - Cloud provider secret managers (AWS Secrets Manager, GCP Secret Manager, Azure Key Vault)

apiVersion: v1
kind: Secret
metadata:
  name: vibebox-secrets
  namespace: vibebox
  labels:
    app.kubernetes.io/name: vibebox
    app.kubernetes.io/component: secrets
type: Opaque
data:
  # PostgreSQL Credentials
  # Generate with: echo -n "vibebox" | base64
  POSTGRES_USER: <BASE64_ENCODED_USERNAME>

  # Generate with: openssl rand -base64 32 | tr -d '\n' | base64
  POSTGRES_PASSWORD: <BASE64_ENCODED_PASSWORD>

  # Database URLs (include username and password)
  # Format: postgresql://username:password@vibebox-postgres:5432/vibebox?schema=public
  # Encode the entire URL: echo -n "postgresql://..." | base64
  DATABASE_URL: <BASE64_ENCODED_DATABASE_URL>
  DATABASE_URL_TEST: <BASE64_ENCODED_DATABASE_URL_TEST>

  # JWT Secrets (minimum 32 characters, cryptographically random)
  # Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
  JWT_SECRET: <BASE64_ENCODED_JWT_SECRET>
  JWT_REFRESH_SECRET: <BASE64_ENCODED_JWT_REFRESH_SECRET>

  # Encryption Key for environment variables (32 bytes)
  # Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
  ENCRYPTION_KEY: <BASE64_ENCODED_ENCRYPTION_KEY>

  # Optional: OAuth Provider Credentials
  # GITHUB_CLIENT_ID: <BASE64_ENCODED_GITHUB_CLIENT_ID>
  # GITHUB_CLIENT_SECRET: <BASE64_ENCODED_GITHUB_CLIENT_SECRET>
  # GOOGLE_CLIENT_ID: <BASE64_ENCODED_GOOGLE_CLIENT_ID>
  # GOOGLE_CLIENT_SECRET: <BASE64_ENCODED_GOOGLE_CLIENT_SECRET>

---
# Example populated secret for testing (DO NOT USE IN PRODUCTION)
# apiVersion: v1
# kind: Secret
# metadata:
#   name: vibebox-secrets-example
#   namespace: vibebox
# type: Opaque
# data:
#   POSTGRES_USER: dmlibZWJveA==  # vibebox
#   POSTGRES_PASSWORD: Y2hhbmdlbWU=  # changeme (DO NOT USE!)
#   DATABASE_URL: cG9zdGdyZXNxbDovL3ZpYmVib3g6Y2hhbmdlbWVAdmlibWVib3gtcG9zdGdyZXM6NTQzMi92aWJlYm94P3NjaGVtYT1wdWJsaWM=
#   JWT_SECRET: ZGV2LXNlY3JldC1jaGFuZ2UtaW4tcHJvZHVjdGlvbg==
#   JWT_REFRESH_SECRET: ZGV2LXJlZnJlc2gtc2VjcmV0LWNoYW5nZS1pbi1wcm9kdWN0aW9u
#   ENCRYPTION_KEY: ZGV2LWVuY3J5cHRpb24ta2V5LWNoYW5nZS1pbi1wcm9kdWN0aW9uMTIz
